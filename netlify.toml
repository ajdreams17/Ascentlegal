[build]
  command = "npm run build"
  publish = ".next"

[functions]
  node_bundler = "esbuild"
  
# --- Canonical domain & HTTPS (NON-WWW) ---
[[redirects]]
  from = "http://ascentlegal.io/*"
  to = "https://ascentlegal.io/:splat"
  status = 301
  force = true

[[redirects]]
  from = "http://www.ascentlegal.io/*"
  to = "https://ascentlegal.io/:splat"
  status = 301
  force = true

[[redirects]]
  from = "https://www.ascentlegal.io/*"
  to = "https://ascentlegal.io/:splat"
  status = 301
  force = true

# Next.js plugin pinned to v4 (works with Netlify Forms without the v5 migration)
[[plugins]]
  package = "@netlify/plugin-nextjs"
  pinned_version = "4.41.2"   # any latest 4.x is fine

# (optional) Lighthouse plugin
# (Optional) Keep Lighthouse if you want:
[[plugins]]
  package = "@netlify/plugin-lighthouse"
